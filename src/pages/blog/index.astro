---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<Layout>
  <main class="mx-auto w-[960px]">
    <section>
      <ul class="flex flex-wrap gap-8 list-none m-0 p-0 max-[720px]:gap-2">
        {
          posts.map((post) => (
            <li class="w-[calc(50%-1rem)] max-[720px]:w-full max-[720px]:text-center">
              <a
                href={`/blog/${post.slug}/`}
                class="block no-underline group transition-all duration-200"
              >
                <h4 class="m-0 text-token-primary leading-none group-hover:text-token-secondary transition-colors">
                  {post.data.title}
                </h4>
                <p class="m-0 text-token-date group-hover:text-token-secondary transition-colors">
                  {post.data.pubDate.toLocaleDateString('en-us', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                  })}
                </p>
              </a>
            </li>
          ))
        }
      </ul>
    </section>
  </main>
</Layout>
